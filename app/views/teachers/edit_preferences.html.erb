<!-- ptTimeSelect files below -->
<%= stylesheet_link_tag 'jquery.ptTimeSelect.css' %>
<%= javascript_include_tag 'jquery.ptTimeSelect.js' %>
<script type="text/javascript">
  $(function(){
    $('#start_hour').ptTimeSelect({hoursLabel: "Ore", minutesLabel: "Minuti", setButtonLabel: "Seleziona", onFocusDisplay: false, popupImage: "<IMG SRC='/stylesheets/images/ptTimeSelect_clock.png'"});
    $('#end_hour').ptTimeSelect({hoursLabel: "Ore", minutesLabel: "Minuti", setButtonLabel: "Seleziona", onFocusDisplay: false, popupImage: "<IMG SRC='/stylesheets/images/ptTimeSelect_clock.png'"});
});
</script>

<h3>Modifica delle preferenze per: <%=h @teacher.name %> <%=h @teacher.surname %></h3>
<hr>
<br>
Hai dichiarato la tua preferenza a non sostenere lezioni nei seguenti periodi della settimana:
<br><br>
<table id="manageable_constraints">
  <tr>
    <th>Giorno</th>
    <th>Ora inizio</th>
    <th>Ora fine</th>
  </tr>
<% @constraints.each do |constraint| %>
  <tr id='<%= constraint.id %>'>
    <td><%= from_id_to_dayname(constraint.day) %></td>
    <td><%=h constraint.startHour.to_s(:time) %></td>
    <td><%=h constraint.endHour.to_s(:time) %></td>
    <td><% form_remote_tag :url => destroy_preference_teacher_path(@teacher,:constraint_id => constraint.id) do %>
        <%= submit_tag "Rimuovi" %>
    <% end %></td>
    <td><% form_remote_tag :url => teacher_preference_priority_up_teacher_path(:teacher_id => @teacher.id,:constraint_id => constraint.id) do %>
        <%= submit_tag "Su" %>
    <% end %></td>
    <td><% form_remote_tag :url => teacher_preference_priority_down_teacher_path(:teacher_id => @teacher.id,:constraint_id => constraint.id) do %>
        <%= submit_tag "Giu" %>
    <% end %></td>
  </tr>
<% end %>
</table>
<span id="destroyupdate_error" ></span><br>
<br>
  <strong>Attenzione:</strong>
<p>Le preferenze sono ordinate per <em>priorità decrescente:</em> spostare in alto le preferenze <em>più importanti</em> e in basso quelle <em>meno importanti.</em> L'algoritmo di calcolo dell'orario di lezione darà <em>maggior peso alle preferenze con priorità più alta.</em></p>
<hr>
 <br>
Nuova preferenza:
<br>
 - Inserire il giorno della settimana <br>
 - Inserire l'ora di inizio e fine nel formato HH:MM
<br><br>
<% form_remote_tag :url => create_preference_teacher_path(@teacher) do %>
    <%= label_tag "day", "Giorno interessato" %>
    <%= select_tag "day", "<option>Lunedi</option><option>Martedi</option><option>Mercoledi</option><option>Giovedi</option><option>Venerdi</option>" %> <br>
    <%= label_tag "start_hour", "Ora di inizio vincolo" %>
    <%= text_field_tag "start_hour", nil, :maxlength => 5, :size => 10 %>
    <span id="errors_start"></span> <br>
    <%= label_tag "end_hour", "Ora di fine vincolo" %>
    <%= text_field_tag "end_hour", nil, :maxlength => 5, :size => 10 %>
    <span id="errors_end"></span> <br>
    <br> <span id="errors_others"></span><br>
    <%= submit_tag "Aggiungi preferenza" %>
<% end %>
<br><br>
La nuova preferenza verrà inserita in fondo alla lista: avrà quindi piorità più bassa rispetto alle preferenze inserite precedentemente.
<br><br>
<%= link_to 'Back', :controller => 'timetables' %>
